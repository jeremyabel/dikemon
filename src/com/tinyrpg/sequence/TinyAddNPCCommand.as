package com.tinyrpg.sequence {	import com.tinyrpg.data.TinyFieldMapObjectNPC;	import com.tinyrpg.data.TinyPositionXMLData;	import com.tinyrpg.managers.TinyMapManager;		import flash.geom.Point;	/**	 * Class which represents an "Add NPC" command in the event sequencer.	 * 	 * This command immediately adds a new NPC to the map. Valid XML parameter tags are:	 * 	 * 	SPRITE_NAME: 	The name of the sprite to use. Names are specified in {@link TinySpriteLookup}.	 * 	NPC_NAME: 		The name of the NPC, used as an ID name for identifying the sprite in other event commands.	 * 	EVENT_NAME:		The name of the event to run when the NPC is activated by the player.	 * 	FACING:			The NPC's initial facing.	 * 	POSITION:		The NPC's position on the map grid.	 * 	 * @author jeremyabel	 */	public class TinyAddNPCCommand 	{		public var position		: TinyPositionXMLData;		public var spriteName	: String;		public var eventName	: String;		public var npcName 		: String;		public var facing		: String;				public function TinyAddNPCCommand() : void {}				/**		 * Returns a new {@link TinyAddNPCCommand} created from the given XML data.		 */		public static function newFromXML( xmlData : XML ) : TinyAddNPCCommand		{			var newNPCCommand : TinyAddNPCCommand = new TinyAddNPCCommand();						// Get sprite name			newNPCCommand.spriteName = xmlData.child( 'SPRITE_NAME' ).toString();						// Get npc name			newNPCCommand.npcName = xmlData.child( 'NPC_NAME' ).toString();						// Get event name			newNPCCommand.eventName = xmlData.child( 'EVENT_NAME' ).toString();						// Get facing			newNPCCommand.facing = xmlData.child( 'FACING' ).toString();						// Get location			newNPCCommand.position = TinyPositionXMLData.newFromXML( xmlData.child( 'POSITION' ) );						return newNPCCommand;		}				/**		 * Executes the command. Immidiately adds an NPC with the required parameters		 * to the current map.		 */		public function execute() : void		{			// Create new NPC object			var npcObject : TinyFieldMapObjectNPC = new TinyFieldMapObjectNPC();			npcObject.spriteName = this.spriteName;			npcObject.eventName = this.eventName;			npcObject.npcName = this.npcName;			npcObject.facing = this.facing;			npcObject.dataReady();						// Set position			npcObject.x = this.position.x;			npcObject.y = this.position.y;						// Add to the current map			TinyMapManager.getInstance().currentMap.addNPCObject( npcObject );				}	}}