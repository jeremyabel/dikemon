<?xml version="1.0" encoding="UTF-8"?>
<EVENTS>

	<EVENT_map_setup>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>started_intro</VALUE>
				<IF_TRUE><SEQUENCE><END></END></SEQUENCE></IF_TRUE>
				<IF_FALSE>
					<SEQUENCE>
						<REMOVE_TRIGGER>triggerTryLeaveLabLeft</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerTryLeaveLabRight</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall1</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall2</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall3</REMOVE_TRIGGER>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>done_first_battle</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<REMOVE_TRIGGER>triggerTryLeaveLabLeft</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerTryLeaveLabRight</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall1</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall2</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerBall3</REMOVE_TRIGGER>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE><SEQUENCE><END></END></SEQUENCE></IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_map_setup>

	<!-- =========================================================================================== -->
	<!-- INTRO -->
	<!-- =========================================================================================== -->

	<!-- Add intro NPCs: Oak + Rival + 3 Balls -->
	<EVENT_intro_prefade>
		<SEQUENCE restoreControl="false">
			<REMOVE_NPC>Oak At PC</REMOVE_NPC>
			<ADD_NPC>
				<NPC_NAME>OAK</NPC_NAME>
				<SPRITE_NAME>PROF OAK</SPRITE_NAME>
				<EVENT_NAME>talk_oak</EVENT_NAME>
				<FACING>UP</FACING>
				<POSITION tile="true"><X>5</X><Y>11</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>RIVAL</NPC_NAME>
				<SPRITE_NAME>GARY RIVAL</SPRITE_NAME>
				<EVENT_NAME>talk_rival</EVENT_NAME>
				<FACING>UP</FACING>
				<POSITION tile="true"><X>4</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 1</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>6</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 2</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>7</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 3</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>8</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<END></END>
		</SEQUENCE>
	</EVENT_intro_prefade>
	
	 <!-- Debug event which sets up testing the 2nd half of the intro -->
	<EVENT_intro_prefade_debug>
		<SEQUENCE>
			<REMOVE_NPC>Oak At PC</REMOVE_NPC>
			<!-- <SET_FLAG>picked_ball</SET_FLAG> -->
			<SET_FLAG>picking_ball</SET_FLAG>
			<ADD_NPC>
				<NPC_NAME>OAK</NPC_NAME>
				<SPRITE_NAME>PROF OAK</SPRITE_NAME>
				<EVENT_NAME>talk_oak</EVENT_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>5</X><Y>2</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>RIVAL</NPC_NAME>
				<SPRITE_NAME>GARY RIVAL</SPRITE_NAME>
				<EVENT_NAME>talk_rival</EVENT_NAME>
				<FACING>UP</FACING>
				<POSITION tile="true"><X>4</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 1</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>6</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 2</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>7</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<ADD_NPC>
				<NPC_NAME>BALL 3</NPC_NAME>
				<SPRITE_NAME>DIKEBALL</SPRITE_NAME>
				<FACING>DOWN</FACING>
				<POSITION tile="true"><X>8</X><Y>3</Y></POSITION>
			</ADD_NPC>
			<END></END>
		</SEQUENCE>
	</EVENT_intro_prefade_debug>

	<!-- Oak takes the player into the lab and ball shenanigans occur -->
	<EVENT_intro_postfade>
		<SEQUENCE>
			<WALK sync="TRUE">
				<TARGET>Oak</TARGET>
				<DIRECTION>UP</DIRECTION>
				<TILES>9</TILES>
				<SPEED>11</SPEED>
			</WALK>

			<!-- Delay until Oak walks off screen (5 steps) -->
			<DELAY>55</DELAY>

			<!-- Player follows Oak -->
			<WALK sync="TRUE">
				<TARGET>PLAYER</TARGET>
				<DIRECTION>UP</DIRECTION>
				<TILES>8</TILES>
				<SPEED>11</SPEED>
			</WALK>

			<!-- Delay until Oak reaches his destination (4 steps) -->
			<DELAY>44</DELAY>
			<SET_FACING>
				<TARGET>Oak</TARGET>
				<FACING>DOWN</FACING>
			</SET_FACING>

			<!-- Delay until the player reaches their destination -->
			<DELAY>44</DELAY>
			<DELAY>8</DELAY>

			<!-- Oak prompts player to pick a Dikémon and Rival gets cranky -->
			<SHOW_EMOTE>
				<TARGET>RIVAL</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>RIVAL</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>RIVAL</SPEAKER>
				<TEXT>Gramps![delay 6] I'm tired of waiting![halt] I need to get my hands on your Dikéballs now!   [end]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>That's right, [delay 2] I told you to come too. [halt]Just take it easy, [delay 4][name]. [halt]Here [name], [delay 4]I have some protection for you. [halt]There are three Dikémon in my balls. [delay 4]When I was your age, [delay 2]I was a serious trainer. [halt]I was also really good at some other stuff, [delay 2]nudge [delay 2]nudge. [halt]Anyhoo, [delay 2]why don't you go pick one of my Dikéballs on the table?   [end]</TEXT>
			</DIALOG>
			<SHOW_EMOTE>
				<TARGET>RIVAL</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>RIVAL</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>RIVAL</SPEAKER>
				<TEXT>[custom_dialog_lab_rival_intro]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>Be patient, [delay 2][name]. [delay 4]You'll get to counter-pick this bitch and wipe the floor with them throughout the early game. [halt]OK, [delay 4][name], [delay 4]make your dumb choice.   [end]</TEXT>
			</DIALOG>
			<SET_FLAG>picking_ball</SET_FLAG>
			<END></END>
		</SEQUENCE>
	</EVENT_intro_postfade>

	<!-- Rival picks a ball and challenges Player to a battle -->
	<EVENT_intro_after_pick>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER>PLAYER</SPEAKER>
				<TEXT>So [delay 2]uh[delay 2].[delay 2].[delay 2].[delay 2] These aren't real Dikémon, [delay 8]are they?   [end]</TEXT>
			</DIALOG>
			<SHOW_EMOTE>
				<TARGET>OAK</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>OAK</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>What?! [delay 4]Oh yeah. [delay 4]All the Dikémon have kinda disappeared. [halt]No one knows where they went. [halt]Weird, huh? [halt]Well, [delay 4][name], [delay 4]your turn.   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>

			<!-- Rival walks to pick up the first ball -->
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>DOWN</DIRECTION>
				<TILES>1</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>11</SPEED>
			</WALK>

			<!-- Rival picks up ball -->
			<SET_FACING>
				<TARGET>RIVAL</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DELAY>8</DELAY>
			<REMOVE_NPC>BALL 1</REMOVE_NPC>
			<DELAY>8</DELAY>

			<!-- Rival walks back to Player -->
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>LEFT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>UP</DIRECTION>
				<TILES>1</TILES>
				<SPEED>11</SPEED>
			</WALK>

			<!-- Rival sasses Player, Oak tells everyone to get out -->
			<SET_FACING>
				<TARGET>RIVAL</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>LEFT</FACING>
			</SET_FACING>
			<DELAY>8</DELAY>
			<DIALOG>
				<SPEAKER>RIVAL</SPEAKER>
				<TEXT>I guess I'll take the one that conveniently couters your dumb pick.   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>
			<SET_FACING>
				<TARGET>RIVAL</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DELAY>8</DELAY>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>Great, [delay 6]now get outta here! [halt]I've got some very uh, [delay 6]important Dikémon research I must get back to!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>

			<!-- Oak walks away, then remembers something and walks back and tells Player to go to the city -->
			<WALK>
				<TARGET>OAK</TARGET>
				<DIRECTION>LEFT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>8</SPEED>
			</WALK>
			<DELAY>4</DELAY>
			<SHOW_EMOTE>
				<TARGET>OAK</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>OAK</TARGET>
			</HIDE_EMOTE>
			<WALK>
				<TARGET>OAK</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>8</SPEED>
			</WALK>
			<DELAY>2</DELAY>
			<SET_FACING>
				<TARGET>OAK</TARGET>
				<FACING>DOWN</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>Oh and [name], [delay 4]I heard some people were looking for you in Cherrygrove City to the west. [halt]You should probably go there, or whatever.   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>

			<!-- Set the flag which triggers the next bit to happen when the player tries to leave the lab -->
			<CLEAR_FLAG>picking_ball</CLEAR_FLAG>
			<SET_FLAG>picked_ball</SET_FLAG>

			<END></END>
		</SEQUENCE>
	</EVENT_intro_after_pick>

	<EVENT_try_leave_lab_left>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picked_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE restoreControl="false">
						<SET_FLAG>exit_lab_left</SET_FLAG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>
					<SEQUENCE restoreControl="false"><END></END></SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<SUB_SEQUENCE>try_leave_lab</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_try_leave_lab_left>

	<EVENT_try_leave_lab_right>
		<SEQUENCE>
			<SUB_SEQUENCE>try_leave_lab</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_try_leave_lab_right>

	<EVENT_try_leave_lab>
		<SEQUENCE restoreControl="false">
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picking_ball</VALUE>

				<!-- If the Player should be picking a ball, Oak yells at them for trying to leave. -->
				<IF_TRUE>
					<SEQUENCE restoreControl="false">
						<DELAY>4</DELAY>
						<SET_FACING>
							<TARGET>PLAYER</TARGET>
							<FACING>UP</FACING>
						</SET_FACING>
						<DIALOG>
							<SPEAKER>OAK</SPEAKER>
							<TEXT>Hey!! [delay 4]Get back here and grab one of my balls!   [end]</TEXT>
						</DIALOG>
						<WALK>
							<TARGET>PLAYER</TARGET>
							<DIRECTION>UP</DIRECTION>
							<TILES>1</TILES>
							<SPEED>11</SPEED>
						</WALK>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>

				<!-- If the Player has picked a ball but tries to leave the lab, Rival interrupts Player for a battle. -->
				<IF_FALSE>
					<SEQUENCE restoreControl="false">
						<CONDITIONAL>
							<TYPE>FLAG</TYPE>
							<VALUE>done_first_battle</VALUE>
							<IF_TRUE>
								<SEQUENCE>
									<END></END>
								</SEQUENCE>
							</IF_TRUE>

							<IF_FALSE>
								<SEQUENCE restoreControl="false">
									<DELAY>4</DELAY>
									<SET_FACING>
										<TARGET>PLAYER</TARGET>
										<FACING>UP</FACING>
									</SET_FACING>
									<DELAY>4</DELAY>
									
									<!-- Rival approaches player depending on which side the player tried to exit from -->
									<CONDITIONAL>
										<TYPE>FLAG</TYPE>
										<VALUE>exit_lab_left</VALUE>
										<IF_TRUE>
											<SEQUENCE restoreControl="false">
												<SUB_SEQUENCE>rival_approach_left</SUB_SEQUENCE>
												<END></END>
											</SEQUENCE>
										</IF_TRUE>
										<IF_FALSE>
											<SEQUENCE restoreControl="false">
												<SUB_SEQUENCE>rival_approach_right</SUB_SEQUENCE>
												<END></END>
											</SEQUENCE>
										</IF_FALSE>
									</CONDITIONAL>

									<DIALOG>
										<SPEAKER>RIVAL</SPEAKER>
										<TEXT>Wait, [name]! [halt]Let's whip out our Dikémon!   [end]</TEXT>
									</DIALOG>

									<!-- TODO: BATTLE GOES HERE -->

									<!-- Rival loses, yells -->
									<DIALOG>
										<SPEAKER>RIVAL</SPEAKER>
										<TEXT>Damn, [delay 6]your Dikémon really is a try-hard, [delay 6]huh. [halt]Well, I'm gonna 'roid up my Dikémon to compensate for my own sense of inadequacy. [halt]SMELL YA LATER, FUCKTARD!   [end]</TEXT>
									</DIALOG>
									
									<!-- Rival exits, depending on which side the player tried to exit from -->
									<CONDITIONAL>
										<TYPE>FLAG</TYPE>
										<VALUE>exit_lab_left</VALUE>
										<IF_TRUE>
											<SEQUENCE restoreControl="false">
												<SUB_SEQUENCE>rival_exit_left</SUB_SEQUENCE>
												<END></END>
											</SEQUENCE>
										</IF_TRUE>
										<IF_FALSE>
											<SEQUENCE restoreControl="false">
												<SUB_SEQUENCE>rival_exit_right</SUB_SEQUENCE>
												<END></END>
											</SEQUENCE>
										</IF_FALSE>
									</CONDITIONAL>

									<REMOVE_NPC>RIVAL</REMOVE_NPC>
									<SET_FLAG>done_first_battle</SET_FLAG>

									<END></END>
								</SEQUENCE>
							</IF_FALSE>
						</CONDITIONAL>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>

			<!-- Remove both "try leaving the lab" triggers to prevent getting stuck on them after the event is done -->
			<REMOVE_TRIGGER>triggerTryLeaveLabLeft</REMOVE_TRIGGER>
			<REMOVE_TRIGGER>triggerTryLeaveLabRight</REMOVE_TRIGGER>

			<END></END>
		</SEQUENCE>
	</EVENT_try_leave_lab>

	<!-- Player tries to leave from the LEFT tile and Rival approaches for battle -->
	<EVENT_rival_approach_left>
		<SEQUENCE restoreControl="false">
			<DELAY>4</DELAY>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>DOWN</DIRECTION>
				<TILES>2</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<END></END>
		</SEQUENCE>
	</EVENT_rival_approach_left>

	<!-- Player tries to leave from the RIGHT tile and Rival approaches for battle -->
	<EVENT_rival_approach_right>
		<SEQUENCE restoreControl="false">
			<DELAY>4</DELAY>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>1</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>DOWN</DIRECTION>
				<TILES>2</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<END></END>
		</SEQUENCE>
	</EVENT_rival_approach_right>

	<!-- Rival exits the map from the LEFT tile -->
	<EVENT_rival_exit_left>
		<SEQUENCE restoreControl="false">
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>1</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>DOWN</FACING>
			</SET_FACING>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>DOWN</DIRECTION>
				<TILES>8</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<END></END>
		</SEQUENCE>
	</EVENT_rival_exit_left>

	<!-- Rival exits the map from the RIGHT tile -->
	<EVENT_rival_exit_right>
		<SEQUENCE restoreControl="false">
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>LEFT</FACING>
			</SET_FACING>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>LEFT</DIRECTION>
				<TILES>1</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>DOWN</FACING>
			</SET_FACING>
			<WALK>
				<TARGET>RIVAL</TARGET>
				<DIRECTION>DOWN</DIRECTION>
				<TILES>8</TILES>
				<SPEED>9</SPEED>
			</WALK>
			<END></END>
		</SEQUENCE>
	</EVENT_rival_exit_right>

	<!-- Player picks useless BUCKET ball. Oak yells -->
	<EVENT_pick_ball_1>
		<SEQUENCE>
			<CHOOSE_STARTER>
				<NAME>BUCKET</NAME>
				<IF_YES>
					<SEQUENCE>
						<SHOW_EMOTE>
							<TARGET>OAK</TARGET>
							<EMOTE>EXCLAIM</EMOTE>
						</SHOW_EMOTE>
						<DELAY>20</DELAY>
						<HIDE_EMOTE>
							<TARGET>OAK</TARGET>
						</HIDE_EMOTE>
						<DIALOG>
							<SPEAKER>OAK</SPEAKER>
							<TEXT>You idiot, [delay 8]that's a goddamn bucket! [halt]Try a different one.   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_YES>
				<IF_NO>
					<SEQUENCE>
						<END></END>
					</SEQUENCE>
				</IF_NO>
			</CHOOSE_STARTER>
			<END></END>
		</SEQUENCE>
	</EVENT_pick_ball_1>

	<!-- Player picks the second ball, which is the only actual choice -->
	<EVENT_pick_ball_2>
		<SEQUENCE>
			<CHOOSE_STARTER>
				<NAME>TALL GRASS</NAME>
				<IF_YES>
					<SEQUENCE restoreControl="false">
						<SUB_SEQUENCE>return_from_ball_choice</SUB_SEQUENCE>
						<END></END>
					</SEQUENCE>
				</IF_YES>
				<IF_NO>
					<SEQUENCE>
						<END></END>
					</SEQUENCE>
				</IF_NO>
			</CHOOSE_STARTER>
			<END></END>
		</SEQUENCE>
	</EVENT_pick_ball_2>

	<!-- Before picking a ball: Player picks useless SHOE ball. Oak yells again -->
	<!-- After picking a ball: Player pushes the extra ball into the trash -->
	<EVENT_pick_ball_3>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picked_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>PLAYER</SPEAKER>
							<TEXT>Let me just[delay 4].[delay 4].[delay 4].[delay 4] take care of this.[delay 2].[delay 2].[delay 2].   [end]</TEXT>
						</DIALOG>
						<DELAY>4</DELAY>
						<WALK>
							<TARGET>BALL 3</TARGET>
							<DIRECTION>RIGHT</DIRECTION>
							<TILES>1</TILES>
							<SPEED>60</SPEED>
						</WALK>
						<DELAY>3</DELAY>
						<REMOVE_NPC>BALL 3</REMOVE_NPC>
						<DELAY>10</DELAY>
						<DIALOG>
							<SPEAKER>PLAYER</SPEAKER>
							<TEXT>There. Much better.   [end]</TEXT>
						</DIALOG>
						<REMOVE_TRIGGER>triggerBall3</REMOVE_TRIGGER>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>
					<SEQUENCE>
						<CHOOSE_STARTER>
							<NAME>SHOE</NAME>
							<IF_YES>
								<SEQUENCE>
									<SHOW_EMOTE>
										<TARGET>OAK</TARGET>
										<EMOTE>EXCLAIM</EMOTE>
									</SHOW_EMOTE>
									<DELAY>20</DELAY>
									<HIDE_EMOTE>
										<TARGET>OAK</TARGET>
									</HIDE_EMOTE>
									<DIALOG>
										<SPEAKER>OAK</SPEAKER>
										<TEXT>Look, [delay 6]if you try and battle with that thing, [delay 6]I'm pretty sure your mom would disown you from the shame. [halt]Try again.   [end]</TEXT>
									</DIALOG>
									<END></END>
								</SEQUENCE>
							</IF_YES>
							<IF_NO>
								<SEQUENCE>
									<END></END>
								</SEQUENCE>
							</IF_NO>
						</CHOOSE_STARTER>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_pick_ball_3>

	<!-- Player walks back to Oak after picking their starter -->
	<EVENT_return_from_ball_choice restoreControl="false">
		<SEQUENCE>
			<REMOVE_TRIGGER>triggerBall1</REMOVE_TRIGGER>
			<REMOVE_TRIGGER>triggerBall2</REMOVE_TRIGGER>
			<DELAY>10</DELAY>
			<REMOVE_NPC>BALL 2</REMOVE_NPC>
			<DELAY>10</DELAY>
			<SET_FLAG>picked_ball</SET_FLAG>
			<SET_FACING>
				<TARGET>RIVAL</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<WALK>
				<TARGET>PLAYER</TARGET>
				<DIRECTION>LEFT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<WALK>
				<TARGET>PLAYER</TARGET>
				<DIRECTION>UP</DIRECTION>
				<TILES>1</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<SUB_SEQUENCE>intro_after_pick</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_return_from_ball_choice>
	

	<!-- =========================================================================================== -->
	<!-- NPCS -->
	<!-- =========================================================================================== -->	

	<!-- Talking to Oak during the intro -->
	<EVENT_talk_oak>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picking_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>OAK</SPEAKER>
							<TEXT>Go ahead, [delay 6] touch one!   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE><SEQUENCE><END></END></SEQUENCE></IF_FALSE>
			</CONDITIONAL>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picked_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>OAK</SPEAKER>
							<TEXT>Get outta here!   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE><SEQUENCE><END></END></SEQUENCE></IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_oak>

	<!-- Talking to Rival during the intro -->
	<EVENT_talk_rival>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picking_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>RIVAL</SPEAKER>
							<TEXT>Heh, I don't need to be greedy like you! [halt]Go ahead and choose, dingus!    [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>RIVAL</SPEAKER>
							<TEXT>Aren't you supposed to be leaving?   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_rival>

	<!-- Talking to Oak at the PC after the intro -->
	<EVENT_talk_oak_at_pc>
		<SEQUENCE>
			<SHOW_EMOTE>
				<TARGET>Oak At PC</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>15</DELAY>
			<HIDE_EMOTE>
				<TARGET>Oak At PC</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>Jeez don't stand behind me like that! [halt]Get outta here!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>Oak At PC</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_oak_at_pc>

	<!-- Talking to the scientist before / after the intro -->
	<EVENT_talk_scientist>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>scientist_gave_potion</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER>Oak's Aide</SPEAKER>
							<TEXT>There's only two of us, so work is pretty hard, heh heh.   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>

					<!-- Scientist gives a potion after the first battle -->
					<SEQUENCE>
						<CONDITIONAL>
							<TYPE>FLAG</TYPE>
							<VALUE>picked_ball</VALUE>
							<IF_TRUE>
								<SEQUENCE>
									<DIALOG>
										<SPEAKER>Oak's Aide</SPEAKER>
										<TEXT>[name], I want you to have this for your trip to the city.   [end]</TEXT>
									</DIALOG>
									<GIVE_ITEM>Potion</GIVE_ITEM>
									<SET_FLAG>scientist_gave_potion</SET_FLAG>
									<DELAY>8</DELAY>
									<DIALOG>
										<SPEAKER></SPEAKER>
										<TEXT>You got an OKFeels™ Spray!   [end]</TEXT>
									</DIALOG>
									<END></END>
								</SEQUENCE>
							</IF_TRUE>
							<IF_FALSE>
								<SEQUENCE>
									<DIALOG>
										<SPEAKER>Oak's Aide</SPEAKER>
										<TEXT>There's only two of us, so work is pretty hard, heh heh.   [end]</TEXT>
									</DIALOG>
									<END></END>
								</SEQUENCE>
							</IF_FALSE>
						</CONDITIONAL>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_scientist>


	<!-- =========================================================================================== -->
	<!-- OBJECTS -->
	<!-- =========================================================================================== -->

	<!-- Check Computer -->
	<EVENT_check_computer>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>It's just a hollow plastic box painted to look like a computer!   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_computer>

	<!-- Check machine by bookshelves -->
	<EVENT_check_machine>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>There's a spinning 3D DNA molecule on screen. Fancy!   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_machine>

	<!-- Check trashcan by the table -->
	<EVENT_check_trashcan>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>There's like 20 empty cans of prunes in here...   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_trashcan>

	<!-- Check the healer -->
	<EVENT_check_healer>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>picked_ball</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<!-- TODO: Heal all mons -->
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>
					<SEQUENCE>
						<DIALOG>
							<SPEAKER></SPEAKER>
							<TEXT>This looks like a device for healing your busted Dikémon.   [end]</TEXT>
						</DIALOG>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_check_healer>

	<!-- Check Bookshelf 1 -->
	<EVENT_check_books_1>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"Ethical Dikémon Eugenics"  [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_1>

	<!-- Check Bookshelf 2 -->
	<EVENT_check_books_2>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"The Leg Bone's Connected to the What Now? Basic Human Anatomy for Idiots"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_2>

	<!-- Check Bookshelf 3 -->
	<EVENT_check_books_3>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"Introduction to Office Planning for Dungeon Masters"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_3>

	<!-- Check Bookshelf 4 -->
	<EVENT_check_books_4>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"101 Easy Recipies For That Goo In Those Glass Specimin Storage Tanks You See In Sci-Fi Movies Sometimes"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_4>

	<!-- Check Bookshelf 5 -->
	<EVENT_check_books_5>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"Beaks N' Things: Wholesale Taxidermy Supply Catalog"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_5>

	<!-- Check Bookshelf 3 -->
	<EVENT_check_books_6>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"Chimp Limbs: Theory And Practice"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_6>

	<!-- Check Bookshelf 7 -->
	<EVENT_check_books_7>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"1-2-3 Abomination! The Easy Guide to Birthing Unholy Creations in your Own Kitchen"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_7>

	<!-- Check Bookshelf 8 -->
	<EVENT_check_books_8>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"The Great Dikéxplorers"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_8>

	<!-- Check Bookshelf 9 -->
	<EVENT_check_books_9>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"My Life In Fish Prison" by Gleonard Magikarp   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_9>

	<!-- Check Bookshelf 10 -->
	<EVENT_check_books_10>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>"Are You There God? It's Me, Pikachu: My Journey To Jesus"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_10>

	<!-- Check Bookshelf 11 -->
	<EVENT_check_books_11>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>The shelf is entirely taken up with an entire 102-volume set of "The Schtain's Guide To Collecting Erotic Push-Puppets"   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_check_books_11>
	
</EVENTS>