<?xml version="1.0" encoding="UTF-8"?>
<EVENTS>

	<EVENT_map_setup>
		<SEQUENCE>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>started_intro_lab</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<REMOVE_TRIGGER>triggerOakIntro1</REMOVE_TRIGGER>
						<REMOVE_TRIGGER>triggerOakIntro2</REMOVE_TRIGGER>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE><SEQUENCE><END></END></SEQUENCE></IF_FALSE>
			</CONDITIONAL>
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>done_first_battle</VALUE>
				<IF_TRUE>
					<SEQUENCE>
						<SET_FLAG>done_with_mom_talking</SET_FLAG>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE><SEQUENCE><END></END></SEQUENCE></IF_FALSE>
			</CONDITIONAL>
			<END></END>
		</SEQUENCE>
	</EVENT_map_setup>


	<!-- =========================================================================================== -->
	<!-- SIGNS -->
	<!-- =========================================================================================== -->

	<!-- First sign -->
	<EVENT_sign_route_start>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER></SPEAKER>
				<TEXT>It says "Route 69"[halt] .[delay 6].[delay 6].[delay 6]but it's hard to read[delay 6], since so many people have written[delay 6] "nice" [delay 6]over the lettering.   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_sign_route_start>


	<!-- =========================================================================================== -->
	<!-- NPCS -->
	<!-- =========================================================================================== -->

	<EVENT_talk_bush_guy>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER>BUSH GUY</SPEAKER>
				<TEXT>Dikémon hide in the thick bush. [halt]Who knows when they'll pop out...   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_bush_guy>

	<EVENT_talk_ledge_girl>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER>GIRL</SPEAKER>
				<TEXT>See those ledges? [halt]Don't be a pussy, [delay 6]jump off off them! [halt]You can go back to town without walking through the thick bush that way.   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_ledge_girl>

	<EVENT_talk_save_guy>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER>GUY</SPEAKER>
				<TEXT>I wanted to take a break, [delay 6]so I saved to record my progress. [halt]Wait, [delay 4]how does that even work?   [end]</TEXT>
			</DIALOG>
			<END></END>
		</SEQUENCE>
	</EVENT_talk_save_guy>

	<!-- =========================================================================================== -->
	<!-- INTRO -->
	<!-- =========================================================================================== -->

	<!-- Exclaim emote before Oak enters -->
	<EVENT_oak_intro_player_surprise>
		<SEQUENCE>
			<SET_FLAG>started_intro_lab</SET_FLAG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>
			<SHOW_EMOTE>
				<TARGET>PLAYER</TARGET>
				<EMOTE>Exclaim</EMOTE>
			</SHOW_EMOTE>
			<END></END>
		</SEQUENCE>
	</EVENT_oak_intro_player_surprise>

	<!-- Intro event for upper tile -->
	<EVENT_oak_intro_start_1>
		<SEQUENCE restoreControl="false">
			<SUB_SEQUENCE>oak_intro_player_surprise</SUB_SEQUENCE>
			<ADD_NPC>
				<NPC_NAME>Oak</NPC_NAME>
				<SPRITE_NAME>PROF OAK</SPRITE_NAME>
				<FACING>LEFT</FACING>
				<POSITION tile="true"><X>54</X><Y>8</Y></POSITION>
			</ADD_NPC>
			<SUB_SEQUENCE>oak_intro_bush_jokes</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_oak_intro_start_1>

	<!--Intro event for lower tile -->
	<EVENT_oak_intro_start_2>
		<SEQUENCE restoreControl="false">
			<SUB_SEQUENCE>oak_intro_player_surprise</SUB_SEQUENCE>
			<ADD_NPC>
				<NPC_NAME>Oak</NPC_NAME>
				<SPRITE_NAME>PROF OAK</SPRITE_NAME>
				<FACING>LEFT</FACING>
				<POSITION tile="true"><X>54</X><Y>9</Y></POSITION>
			</ADD_NPC>
			<SUB_SEQUENCE>oak_intro_bush_jokes</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_oak_intro_start_2>

	<!-- Oak stops player, warns about dangerous bushes, drags player back to the lab. -->
	<EVENT_oak_intro_bush_jokes>
		<SEQUENCE restoreControl="false">
			<DIALOG>
				<SPEAKER>SOME GUY</SPEAKER>
				<TEXT>Hold up!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<HIDE_EMOTE>
				<TARGET>PLAYER</TARGET>
			</HIDE_EMOTE>

			<!-- Oak walks in -->
			<WALK>
				<TARGET>Oak</TARGET>
				<DIRECTION>LEFT</DIRECTION>
				<TILES>6</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<DELAY>8</DELAY>

			<DIALOG>
				<SPEAKER>OAK</SPEAKER>
				<TEXT>Wait [name]! [halt]Dikémon hide in thick bush! [halt]You need protection before you enter the bush! [halt]Come with me.   [end]</TEXT>
			</DIALOG>
			
			<DELAY>8</DELAY>

			<!-- Both walk back to lab -->
			<WALK sync="TRUE">
				<TARGET>PLAYER</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>8</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<WALK sync="TRUE">
				<TARGET>Oak</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>8</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<DELAY>38</DELAY>
			<WARP>
				<MAP_NAME>TOWNHOUSEPROFESSOR</MAP_NAME>
				<WARP_NAME>warpTown2</WARP_NAME>
				<FACING>UP</FACING>
				<PREFADE>intro_prefade</PREFADE>
				<POSTFADE>intro_postfade</POSTFADE>
				<FADE_SPEED>16</FADE_SPEED>
				<FADE_DELAY>32</FADE_DELAY>
			</WARP>
			<END></END>
		</SEQUENCE>
	</EVENT_oak_intro_bush_jokes>

	<!-- =========================================================================================== -->
	<!-- MEETING TEAM VOMIT -->
	<!-- =========================================================================================== -->

	<EVENT_meet_team_vomit_girl>
		<SEQUENCE>
			<WALK>
				<TARGET>Vomit Guy</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>1</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>Vomit Guy</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>
			<SET_FLAG>team_vomit_talked_girl</SET_FLAG>
			<SUB_SEQUENCE>meet_team_vomit</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_meet_team_vomit_girl>

	<EVENT_meet_team_vomit_guy>
		<SEQUENCE>
			<WALK>
				<TARGET>Vomit Girl</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>1</TILES>
				<SPEED>11</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>Vomit Girl</TARGET>
				<FACING>DOWN</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>
			<SUB_SEQUENCE>meet_team_vomit</SUB_SEQUENCE>
			<END></END>
		</SEQUENCE>
	</EVENT_meet_team_vomit_guy>

	<EVENT_meet_team_vomit>
		<SEQUENCE>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>Hey there cool dude!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>You look like a winner!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Cat Thing</SPEAKER>
				<TEXT>Meow!   [end]</TEXT>
			</DIALOG>
			<DELAY>6</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>LEFT</FACING>
			</SET_FACING>
			<DELAY>6</DELAY>
			<SHOW_EMOTE>
				<TARGET>PLAYER</TARGET>
				<EMOTE>QUESTION</EMOTE>
			</SHOW_EMOTE>
			<DELAY>16</DELAY>
			<HIDE_EMOTE>
				<TARGET>PLAYER</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>PLAYER</SPEAKER>
				<TEXT>Umm, [delay 6]can I get through?   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Girl</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Girl</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>10</DELAY>
			<HIDE_EMOTE>
				<TARGET>Vomit Girl</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>You're in luck!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Guy</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>10</DELAY>
			<HIDE_EMOTE>
				<TARGET>Vomit Guy</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>Today is the big give-away!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Girl</TO_NPC>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>Just beat us-   [end]</TEXT>
			</DIALOG>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Guy</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>Team Pop-[delay 6]And-[delay 6]Lock-[delay 6]It!   [end]</TEXT>
			</DIALOG>
			<HIDE_EMOTE>
				<TARGET>Vomit Guy</TARGET>
			</HIDE_EMOTE>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Girl</TO_NPC>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>-in a dance battle, [delay 7]and win a trip to a land full of [delay 4]Dikémon!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Guy</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>10</DELAY>
			<HIDE_EMOTE>
				<TARGET>Vomit Guy</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>Exotic!   [end]</TEXT>
			</DIALOG>
			<DELAY>12</DELAY>
			<DIALOG>
				<SPEAKER>PLAYER</SPEAKER>
				<TEXT>U[delay 4]m[delay4]m, [delay 8]no?   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Girl</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Girl</TARGET>
				<EMOTE>QUESTION</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>Vomit Girl</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>Don't our moves make you want to shake your [delay 2]butt?!   [end]</TEXT>
			</DIALOG>

			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<SPIN_NPC>
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SPIN_NPC>
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>Look at me gyrate!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>UP</FACING>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Cat Thing</SPEAKER>
				<TEXT>Me-[halt]ow!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>

			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<DELAY>4</DELAY>
			<SPIN_NPC>
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SPIN_NPC>
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SHOW_EMOTE>
				<TARGET>PLAYER</TARGET>
				<EMOTE>SKULL</EMOTE>
			</SHOW_EMOTE>
			<DIALOG>
				<SPEAKER>PLAYER</SPEAKER>
				<TEXT>I feel [delay 4]nauseous.[delay 4].[delay 4].   [end]</TEXT>
			</DIALOG>
			<HIDE_EMOTE>
				<TARGET>PLAYER</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>PLAYER</SPEAKER>
				<TEXT>Are you just [delay 6]square [delay 6]dancing?   [end]</TEXT>
			</DIALOG>

			<SPIN_NPC>
				<TARGET>Vomit Girl</TARGET>
				<SPEED>3</SPEED>
			</SPIN_NPC>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Girl</TO_NPC>
			</SET_FACING>
			<SHOW_EMOTE>
				<TARGET>Vomit Girl</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SHOW_EMOTE>
			<DELAY>20</DELAY>
			<HIDE_EMOTE>
				<TARGET>Vomit Girl</TARGET>
			</HIDE_EMOTE>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>Fine then!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<TO_NPC>Vomit Guy</TO_NPC>
			</SET_FACING>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>If you're gonna be a turd [delay 4]then you better.[delay 2].[delay 2].   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>

			<!-- Team Vomit closes in -->
			<CONDITIONAL>
				<TYPE>FLAG</TYPE>
				<VALUE>team_vomit_talked_girl</VALUE>
				<IF_TRUE>
					<SEQUENCE restoreControl="false">
						<WALK sync="TRUE">
							<TARGET>Vomit Girl</TARGET>
							<DIRECTION>RIGHT</DIRECTION>
							<TILES>1</TILES>
							<SPEED>8</SPEED>
						</WALK>
						<END></END>
					</SEQUENCE>
				</IF_TRUE>
				<IF_FALSE>
					<SEQUENCE restoreControl="false">
						<WALK sync="TRUE">
							<TARGET>Vomit Guy</TARGET>
							<DIRECTION>RIGHT</DIRECTION>
							<TILES>1</TILES>
							<SPEED>8</SPEED>
						</WALK>
						<END></END>
					</SEQUENCE>
				</IF_FALSE>
			</CONDITIONAL>

			<!-- Player backs up two steps -->
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>LEFT</FACING>
			</SET_FACING>
			<WALK keepfacing="TRUE">
				<TARGET>PLAYER</TARGET>
				<DIRECTION>RIGHT</DIRECTION>
				<TILES>2</TILES>
				<SPEED>8</SPEED>
			</WALK>
			<SET_FACING>
				<TARGET>PLAYER</TARGET>
				<FACING>LEFT</FACING>
			</SET_FACING>
			<DELAY>4</DELAY>

			<!-- TODO: Both 4-way spin -->

			<SET_FACING>
				<TARGET>Vomit Girl</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<SET_FACING>
				<TARGET>Vomit Guy</TARGET>
				<FACING>RIGHT</FACING>
			</SET_FACING>
			<DELAY>8</DELAY>
			<SET_EMOTE>
				<TARGET>PLAYER</TARGET>
				<EMOTE>EXCLAIM</EMOTE>
			</SET_EMOTE>
			<SPIN_NPC sync="TRUE">
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SPIN_NPC>
				<TARGET>Vomit Girl</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SPIN_NPC sync="TRUE">
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<SPIN_NPC>
				<TARGET>Vomit Girl</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<HIDE_EMOTE>
				<TARGET>PLAYER</TARGET>
			</HIDE_EMOTE>
			<DELAY>8</DELAY>

			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>Prepare for trouble!   [end]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>And make it double!   [end]</TEXT>
			</DIALOG>
			<DELAY>8</DELAY>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>To protect the world from fragmentation!   [end]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>To unite all peoples in our nation!   [end]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>Funky Girl</SPEAKER>
				<TEXT>To denounce the evils of truth and love!   [end]</TEXT>
			</DIALOG>
			<DIALOG>
				<SPEAKER>Fly Boy</SPEAKER>
				<TEXT>To extend our reach to the moon above!   [end]</TEXT>
			</DIALOG>

			<DELAY>8</DELAY>
			<SPIN_NPC>
				<TARGET>Vomit Girl</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<DELAY>8</DELAY>
			<DIALOG>
				<SPEAKER>Mercy</SPEAKER>
				<TEXT>Mercy!   [end]</TEXT>
			</DIALOG>

			<DELAY>8</DELAY>
			<SPIN_NPC>
				<TARGET>Vomit Guy</TARGET>
				<SPEED>4</SPEED>
			</SPIN_NPC>
			<DELAY>8</DELAY>
			<DIALOG>
				<SPEAKER>Evan</SPEAKER>
				<TEXT>Evan!   [end]</TEXT>
			</DIALOG>

			<DIALOG>
				<SPEAKER>Mercy</SPEAKER>
				<TEXT>Team Vomit blasts chunks at the speed of light!   [end]</TEXT>
			</DIALOG>
			<DELAY>4</DELAY>
			<DIALOG>
				<SPEAKER>Evan</SPEAKER>
				<TEXT>Surrender now or get covered in barf!   [end]</TEXT>
			</DIALOG>
			<DELAY>2</DELAY>
			<DIALOG>
				<SPEAKER>Cat Thing</SPEAKER>
				<TEXT>*hairball*   [end]</TEXT>
			</DIALOG>

			<!-- TODO: Battle! -->

			<DIALOG>
				<SPEAKER>Team Vomit</SPEAKER>
				<TEXT>Looks like Team Vomit's blasting chunks aga[delay 2]a[delay 2]a[delay 2]a[delay 2]a[delay 2]a[delay 2]n!   [end]</TEXT>
			</DIALOG>

			<!-- TODO: Fly off or something -->

			<END></END>
		</SEQUENCE>
	</EVENT_meet_team_vomit>
	
</EVENTS>